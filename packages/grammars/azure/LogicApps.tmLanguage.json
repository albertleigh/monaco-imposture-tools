{
  "name": "Azure logic apps expression language",
  "scopeName": "source.azLgcAppExp",
  "patterns": [
    {
      "include": "#statements"
    }
  ],
  "repository": {
    "statements": {
      "patterns": [
        {
          "include": "#atTemplateSubstitutionElement"
        },
        {
          "include": "#atExpression"
        },
        {
          "include": "#dualAtSymbol"
        },
        {
          "include": "#atSymbol"
        }
      ]
    },
    "atTemplateSubstitutionElement": {
      "patterns": [
        {
          "$impostureLang": {
            "type": "atTemplateSubstitutionElement-p0",
            "dataType": "atTemplateSubstitutionElement"
          },
          "name": "meta.template.expression.js",
          "begin": "(?<=(@))(\\{)",
          "beginCaptures": {
            "2": {
              "name": "punctuation.definition.string.template.begin.js"
            }
          },
          "end": "\\}",
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.string.template.end.js"
            }
          },
          "patterns": [
            {
              "include": "#atExpression"
            }
          ]
        }
      ]
    },
    "staringAtSymbol": {
      "name": "punctuation.accessor.js",
      "match": "\\A(@)(?!\\{)"
    },
    "dualAtSymbol": {
      "$impostureLang": {
        "type": "dualAtSymbol",
        "dataType": "dualAtSymbol"
      },
      "name": "constant.character.escape",
      "match": "[@]{2}"
    },
    "atSymbol": {
      "$impostureLang": {
        "type": "atSymbol",
        "dataType": "atSymbol"
      },
      "name": "keyword.symbol.at",
      "match": "[@]{1}"
    },
    "atExpression": {
      "patterns": [
        {
          "include": "#expressionWithoutIdentifiers"
        },
        {
          "include": "#identifiers"
        },
        {
          "include": "#expressionPunctuations"
        }
      ]
    },
    "expressionWithoutIdentifiers": {
      "patterns": [
        {
          "include": "#string"
        },
        {
          "include": "#function-call"
        },
        {
          "include": "#literal"
        },
        {
          "include": "#paren-expression"
        }
      ]
    },
    "expressionPunctuations": {
      "patterns": [
        {
          "include": "#punctuation-comma"
        },
        {
          "include": "#punctuation-accessor"
        }
      ]
    },
    "function-call": {
      "patterns": [
        {
          "$impostureLang": {
            "type": "function-call-complete",
            "dataType": "function-call-complete"
          },
          "begin": "(?=(((([_$[:alpha:]][_$[:alnum:]]*)(\\s*\\??\\.\\s*([_$[:alpha:]][_$[:alnum:]]*))*)|(\\??\\.\\s*[_$[:alpha:]][_$[:alnum:]]*))|(?<=[\\)]))\\s*(?:(\\?\\.\\s*)|(\\!))?(\\())",
          "end": "(?<=\\))(?!(((([_$[:alpha:]][_$[:alnum:]]*)(\\s*\\??\\.\\s*([_$[:alpha:]][_$[:alnum:]]*))*)|(\\??\\.\\s*[_$[:alpha:]][_$[:alnum:]]*))|(?<=[\\)]))\\s*(?:(\\?\\.\\s*)|(\\!))?(\\())",
          "patterns": [
            {
              "$impostureLang": {
                "type": "function-call-full-name",
                "dataType": "function-call"
              },
              "name": "meta.function-call.js",
              "begin": "(?=(([_$[:alpha:]][_$[:alnum:]]*)(\\s*\\??\\.\\s*([_$[:alpha:]][_$[:alnum:]]*))*)|(\\??\\.\\s*[_$[:alpha:]][_$[:alnum:]]*))",
              "end": "(?=\\s*(?:(\\?\\.\\s*)|(\\!))?(\\())",
              "patterns": [
                {
                  "include": "#function-call-target"
                }
              ]
            },
            {
              "include": "#paren-expression"
            }
          ]
        }
      ]
    },
    "function-call-target": {
      "patterns": [
        {
          "include": "#support-function-call-identifiers"
        },
        {
          "$impostureLang": {
            "type": "function-call-target-name",
            "dataType": "function-call-target"
          },
          "name": "entity.name.function.js",
          "match": "([_$[:alpha:]][_$[:alnum:]]*)"
        }
      ]
    },
    "support-function-call-identifiers": {
      "patterns": [
        {
          "include": "#literal"
        },
        {
          "include": "#object-identifiers"
        },
        {
          "include": "#punctuation-accessor"
        }
      ]
    },
    "paren-expression": {
      "$impostureLang": {
        "type": "paren-expression",
        "dataType": "parentheses"
      },
      "begin": "\\(",
      "beginCaptures": {
        "0": {
          "name": "meta.brace.round.js"
        }
      },
      "end": "\\)",
      "endCaptures": {
        "0": {
          "name": "meta.brace.round.js"
        }
      },
      "patterns": [
        {
          "include": "#atExpression"
        }
      ]
    },
    "literal": {
      "patterns": [
        {
          "include": "#numeric-literal"
        },
        {
          "include": "#boolean-literal"
        },
        {
          "include": "#null-literal"
        },
        {
          "include": "#array-literal"
        }
      ]
    },
    "array-literal": {
      "$impostureLang": {
        "type": "array-literal",
        "dataType": "array-literal"
      },
      "name": "meta.array.literal.js",
      "begin": "\\s*(\\[)",
      "beginCaptures": {
        "1": {
          "name": "meta.brace.square.js"
        }
      },
      "end": "\\]",
      "endCaptures": {
        "0": {
          "name": "meta.brace.square.js"
        }
      },
      "patterns": [
        {
          "include": "#atExpression"
        },
        {
          "include": "#punctuation-comma"
        }
      ]
    },
    "numeric-literal": {
      "patterns": [
        {
          "$impostureLang": {
            "type": "numeric-literal",
            "dataType": "number"
          },
          "name": "constant.numeric.hex.js",
          "match": "\\b(?<!\\$)0(?:x|X)[0-9a-fA-F][0-9a-fA-F_]*(n)?\\b(?!\\$)",
          "captures": {
            "1": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "storage.type.numeric.bigint.js"
            }
          }
        },
        {
          "$impostureLang": {
            "type": "numeric-literal",
            "dataType": "number"
          },
          "name": "constant.numeric.binary.js",
          "match": "\\b(?<!\\$)0(?:b|B)[01][01_]*(n)?\\b(?!\\$)",
          "captures": {
            "1": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "storage.type.numeric.bigint.js"
            }
          }
        },
        {
          "$impostureLang": {
            "type": "numeric-literal",
            "dataType": "number"
          },
          "name": "constant.numeric.octal.js",
          "match": "\\b(?<!\\$)0(?:o|O)?[0-7][0-7_]*(n)?\\b(?!\\$)",
          "captures": {
            "1": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "storage.type.numeric.bigint.js"
            }
          }
        },
        {
          "$impostureLang": {
            "type": "numeric-literal",
            "dataType": "number"
          },
          "match": "(?x)\n(?<!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*(n)?\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*(n)?\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)(n)?\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*(n)?\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*(n)?\\b(?!\\.))                                 # 1\n)(?!\\$)",
          "captures": {
            "0": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "constant.numeric.decimal.js"
            },
            "1": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "meta.delimiter.decimal.period.js"
            },
            "2": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "storage.type.numeric.bigint.js"
            },
            "3": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "meta.delimiter.decimal.period.js"
            },
            "4": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "storage.type.numeric.bigint.js"
            },
            "5": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "meta.delimiter.decimal.period.js"
            },
            "6": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "storage.type.numeric.bigint.js"
            },
            "7": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "storage.type.numeric.bigint.js"
            },
            "8": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "meta.delimiter.decimal.period.js"
            },
            "9": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "storage.type.numeric.bigint.js"
            },
            "10": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "meta.delimiter.decimal.period.js"
            },
            "11": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "storage.type.numeric.bigint.js"
            },
            "12": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "meta.delimiter.decimal.period.js"
            },
            "13": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "storage.type.numeric.bigint.js"
            },
            "14": {
              "$impostureLang": {
                "type": "numeric-literal",
                "dataType": "number"
              },
              "name": "storage.type.numeric.bigint.js"
            }
          }
        }
      ]
    },
    "boolean-literal": {
      "patterns": [
        {
          "$impostureLang": {
            "type": "boolean-literal",
            "dataType": "boolean"
          },
          "name": "constant.language.boolean.true.js",
          "match": "(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))true(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"
        },
        {
          "$impostureLang": {
            "type": "boolean-literal",
            "dataType": "boolean"
          },
          "name": "constant.language.boolean.false.js",
          "match": "(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))false(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"
        }
      ]
    },
    "null-literal": {
      "$impostureLang": {
        "type": "null-literal",
        "dataType": "null"
      },
      "name": "constant.language.null.js",
      "match": "(?<![_$[:alnum:]])(?:(?<=\\.\\.\\.)|(?<!\\.))null(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))"
    },
    "punctuation-accessor": {
      "$impostureLang": {
        "type": "punctuation-accessor",
        "dataType": "punctuation"
      },
      "match": "(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))",
      "captures": {
        "1": {
          "$impostureLang": {
            "type": "punctuation-accessor-c1",
            "dataType": "punctuation-capture"
          },
          "name": "punctuation.accessor.js"
        },
        "2": {
          "$impostureLang": {
            "type": "punctuation-accessor-c2",
            "dataType": "punctuation-capture"
          },
          "name": "punctuation.accessor.optional.js"
        }
      }
    },
    "identifiers": {
      "patterns": [
        {
          "include": "#object-identifiers"
        },
        {
          "$impostureLang": {
            "type": "identifiers-p1",
            "dataType": "identifiers:wPunctuation"
          },
          "match": "(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*([[:upper:]][_$[:digit:][:upper:]]*)(?![_$[:alnum:]])",
          "captures": {
            "1": {
              "$impostureLang": {
                "type": "identifiers-p1-c1",
                "dataType": "identifiers-capture"
              },
              "name": "punctuation.accessor.js"
            },
            "2": {
              "$impostureLang": {
                "type": "identifiers-p1-c2",
                "dataType": "identifiers-capture"
              },
              "name": "punctuation.accessor.optional.js"
            },
            "3": {
              "$impostureLang": {
                "type": "identifiers-p1-c3",
                "dataType": "identifiers-capture"
              },
              "name": "variable.other.constant.property.js"
            }
          }
        },
        {
          "$impostureLang": {
            "type": "identifiers-p2",
            "dataType": "identifiers:wPunctuation"
          },
          "match": "(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*([_$[:alpha:]][_$[:alnum:]]*)",
          "captures": {
            "1": {
              "$impostureLang": {
                "type": "identifiers-p2-c1",
                "dataType": "identifiers-capture"
              },
              "name": "punctuation.accessor.js"
            },
            "2": {
              "$impostureLang": {
                "type": "identifiers-p2-c2",
                "dataType": "identifiers-capture"
              },
              "name": "punctuation.accessor.optional.js"
            },
            "3": {
              "$impostureLang": {
                "type": "identifiers-p2-c3",
                "dataType": "identifiers-capture"
              },
              "name": "variable.other.property.js"
            }
          }
        },
        {
          "$impostureLang": {
            "type": "identifiers-p3",
            "dataType": "identifiers"
          },
          "name": "variable.other.constant.js",
          "match": "([[:upper:]][_$[:digit:][:upper:]]*)(?![_$[:alnum:]])"
        },
        {
          "$impostureLang": {
            "type": "identifiers-p4",
            "dataType": "identifiers"
          },
          "name": "variable.other.readwrite.js",
          "match": "[_$[:alpha:]][_$[:alnum:]]*"
        }
      ]
    },
    "object-identifiers": {
      "patterns": [
        {
          "$impostureLang": {
            "type": "object-identifiers-p0",
            "dataType": "object-identifiers:wPunctuation"
          },
          "match": "(?x)(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(?:\n  ([[:upper:]][_$[:digit:][:upper:]]*) |\n  ([_$[:alpha:]][_$[:alnum:]]*)\n)(?=\\s*\\??\\.\\s*[_$[:alpha:]][_$[:alnum:]]*)",
          "captures": {
            "1": {
              "$impostureLang": {
                "type": "object-identifiers-p0-c1",
                "dataType": "object-identifiers-captures"
              },
              "name": "punctuation.accessor.js"
            },
            "2": {
              "$impostureLang": {
                "type": "object-identifiers-p0-c2",
                "dataType": "object-identifiers-captures"
              },
              "name": "punctuation.accessor.optional.js"
            },
            "3": {
              "$impostureLang": {
                "type": "object-identifiers-p0-c3",
                "dataType": "object-identifiers-captures"
              },
              "name": "variable.other.constant.object.property.js"
            },
            "4": {
              "$impostureLang": {
                "type": "object-identifiers-p0-c4",
                "dataType": "object-identifiers-captures"
              },
              "name": "variable.other.object.property.js"
            }
          }
        },
        {
          "$impostureLang": {
            "type": "object-identifiers-p1",
            "dataType": "object-identifiers"
          },
          "match": "(?x)(?:\n  ([[:upper:]][_$[:digit:][:upper:]]*) |\n  ([_$[:alpha:]][_$[:alnum:]]*)\n)(?=\\s*\\??\\.\\s*[_$[:alpha:]][_$[:alnum:]]*)",
          "captures": {
            "1": {
              "$impostureLang": {
                "type": "object-identifiers-p1-c1",
                "dataType": "object-identifiers-captures"
              },
              "name": "variable.other.constant.object.js"
            },
            "2": {
              "$impostureLang": {
                "type": "object-identifiers-p1-c1",
                "dataType": "object-identifiers-captures"
              },
              "name": "variable.other.object.js"
            }
          }
        }
      ]
    },
    "string": {
      "patterns": [
        {
          "include": "#qstring-single"
        },
        {
          "include": "#qstring-double"
        }
      ]
    },
    "punctuation-comma": {
      "$impostureLang": {
        "type": "punctuation-comma",
        "dataType": "comma"
      },
      "name": "punctuation.separator.comma.js",
      "match": ","
    },
    "qstring-double": {
      "$impostureLang": {
        "type": "qstring-double",
        "dataType": "string"
      },
      "name": "string.quoted.double.js",
      "begin": "\"",
      "beginCaptures": {
        "0": {
          "name": "punctuation.definition.string.begin.js"
        }
      },
      "end": "(\")|((?:[^\\\\\\n])$)",
      "endCaptures": {
        "1": {
          "name": "punctuation.definition.string.end.js"
        },
        "2": {
          "name": "invalid.illegal.newline.js"
        }
      },
      "patterns": [
        {
          "include": "#string-character-escape"
        }
      ]
    },
    "qstring-single": {
      "$impostureLang": {
        "type": "qstring-single",
        "dataType": "string"
      },
      "name": "string.quoted.single.js",
      "begin": "'",
      "beginCaptures": {
        "0": {
          "name": "punctuation.definition.string.begin.js"
        }
      },
      "end": "(\\')|((?:[^\\\\\\n])$)",
      "endCaptures": {
        "1": {
          "name": "punctuation.definition.string.end.js"
        },
        "2": {
          "name": "invalid.illegal.newline.js"
        }
      },
      "patterns": [
        {
          "include": "#string-character-escape"
        }
      ]
    },
    "string-character-escape": {
      "$impostureLang": {
        "type": "string-character-escape",
        "dataType": "string"
      },
      "name": "constant.character.escape.js",
      "match": "\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|u\\{[0-9A-Fa-f]+\\}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.|$)"
    }
  }
}
